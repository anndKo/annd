<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kho lưu trữ</title>

<style>
  #helpBtn {
    position: fixed;
    top: 15px;
    right: 15px;
    padding: 10px 18px;
    background: #ff9800;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    z-index: 11000;
}

#hideHelpBtn {
    position: fixed;
    top: 15px;
    right: 130px;
    padding: 10px 18px;
    background: #ca2222;
    color:white;
    border:none;
    border-radius:8px;
    font-size:16px;
    cursor:pointer;
    z-index:11000;
    font-weight: 600;
}

#helpOverlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.8);
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 12000;
}
#helpOverlay video {
    max-width: 90%;
    max-height: 80%;
    border-radius: 12px;
}
#closeHelp {
    margin-top: 20px;
    padding: 12px 20px;
    background: #e53935;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 18px;
    cursor: pointer;
}
body { font-family: sans-serif; padding: 20px; background: #4db391; }
h2 { margin-bottom: 10px; }
.btn { padding: 8px 14px; background: #2563eb; color: #fff; border: none; border-radius: 6px; cursor: pointer; margin: 5px; }
.btn:hover { background: #1e40af; }
input[type=text] { padding: 6px; border-radius: 5px; border: 1px solid #ccc; }
.thumb { max-width: 120px; margin: 5px; border-radius: 6px; cursor: pointer; }
.del { background: #dc2626; margin-top: 4px; }
.folder { background:#fff; padding:12px; border-radius:10px; margin-top:12px; box-shadow:0 4px 15px rgba(0,0,0,0.07);}
#header { display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; }
#uploadPopup { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.4); display:none; justify-content:center; align-items:center; z-index:9999; }
#popupBox { background: #fff; padding: 20px; width: 360px; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.3); }
#searchBar { padding: 8px; width: 300px; border-radius: 6px; border: 1px solid #aaa; margin-bottom: 20px; }
#imageOverlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.8); display:none; justify-content:center; align-items:center; z-index:9999; }
#imageOverlay img { max-width:90%; max-height:90%; border-radius:10px; box-shadow:0 0 20px rgba(0,0,0,0.5); }
#imageOverlay .closeBtn, #imageOverlay .downloadBtn { position:absolute; top:20px; padding:10px 16px; font-size:16px; border:none; border-radius:6px; cursor:pointer; }
#imageOverlay .closeBtn { right:20px; background:#dc2626; color:#fff; }
#imageOverlay .downloadBtn { right:140px; background:#16a34a; color:#fff; }
.imageBox { background:#e7e7bc; padding:8px; border-radius:8px; margin:8px 0; width: fit-content; box-shadow:0 2px 6px rgba(0,0,0,0.12);}
[id^="images-"] { display:grid; grid-template-columns: repeat(2, auto); gap:12px; align-items:start;}
</style>
</head>

<body>
  <!-- NÚT ẨN DUY NHẤT -->
<button id="hideHelpBtn" onclick="hideHelpBtnFunction()">X</button>

<!-- NÚT HƯỚNG DẪN -->
<button id="helpBtn" onclick="showHelp()">Hướng dẫn</button>

<!-- OVERLAY VIDEO -->
<div id="helpOverlay">
    <video id="helpVideo" controls>
        <source src="kho lưu trữ.mp4" type="video/mp4">
    </video>
    <button id="closeHelp" onclick="closeHelp()">Đóng</button>
</div>

<div id="header">
<h2>Kho lưu trữ</h2>
<div>
<span id="userDisplay"></span>
<button class="btn" id="logoutBtn">Đăng xuất</button>
</div>
</div>

<div style="width:100%; background-color:black; padding:10px; border-radius:5px; height:40px;">
<input id="searchBar" type="text" placeholder="Tìm theo tên, loại, ngày giờ..." style="margin-top:5px;width: 70%;">
<label for="" style="background-color: #2563eb; color: white; padding: 10px;font-weight: 600;border-radius: 10px;font-family:Arial, Helvetica, sans-serif;">Tìm</label>
</div>

<div style="width:100%; background-color:rgb(163, 8, 137); padding:10px; border-radius:5px; height:40px; margin-top:5px;">
<input type="text" id="folderNameInput" placeholder="Nhập tên thư mục" style="height:20px; width:58%;">
<button class="btn" id="createFolderBtn" style="background-color: rgb(240,154,43); color:black; font-weight:600;">Tạo thư mục</button>
</div>

<div id="folderList"></div>

<!-- Popup upload -->
<div id="uploadPopup">
<div id="popupBox">
<h3>Thông tin ảnh</h3>
<label>Loại ảnh:</label>
<select id="imgType" style="padding:6px; width:100%; border-radius:6px;">
<option value="Cá nhân">Cá nhân</option>
<option value="Nhóm">Khác</option>
</select>
<br><br>
<label>Đặt tên (để trống để lấy tên file):</label>
<input id="imgTitle" type="text" placeholder="Nhập tên ảnh..." style="padding:6px; width:100%; border-radius:6px;">
<br><br>
<button class="btn" id="confirmUpload">Xác nhận</button>
<button class="btn del" onclick="closePopup()">Hủy</button>
</div>
</div>

<!-- Overlay ảnh -->
<div id="imageOverlay">
<img id="fullImage" src="">
<button class="downloadBtn" id="downloadBtn">Tải xuống</button>
<button class="closeBtn" onclick="closeOverlay()">Đóng</button>
</div>

<script>
 function _0x402d(){const _0x1bd513=['onload','min','1343760pHzEwT','urlInput','error','pause','openDrive','none','image/png','open','https://drive.google.com','onclick','play','drawImage','486700XDagyk','download','href','helpBtn','_blank','getContext','helpOverlay','nenqr.jpg','flex','height','qrCanvas','42931TSOggK','currentTime','1628504zrWQkY','display','110737gPXjKY','3guRitZ','width','style','getElementById','src','Có\x20lỗi\x20khi\x20tạo\x20QR\x20Code.','987195wPQBWO','value','click','trim','222rnuzZf','1486638cXwLta','createElement','toDataURL','9akGJHr','canvas','helpVideo'];_0x402d=function(){return _0x1bd513;};return _0x402d();}const _0x2f09dc=_0x50ca;function _0x50ca(_0x12847e,_0x440090){const _0x402dbf=_0x402d();return _0x50ca=function(_0x50cac8,_0x5a7ff9){_0x50cac8=_0x50cac8-0x1cc;let _0x3bffd2=_0x402dbf[_0x50cac8];return _0x3bffd2;},_0x50ca(_0x12847e,_0x440090);}(function(_0xa5ebe7,_0x1bcf92){const _0x41fd47=_0x50ca,_0x2e9408=_0xa5ebe7();while(!![]){try{const _0x4c5250=-parseInt(_0x41fd47(0x1d8))/0x1+parseInt(_0x41fd47(0x1e4))/0x2*(parseInt(_0x41fd47(0x1d9))/0x3)+parseInt(_0x41fd47(0x1ec))/0x4+-parseInt(_0x41fd47(0x1df))/0x5+parseInt(_0x41fd47(0x1e3))/0x6*(-parseInt(_0x41fd47(0x1d4))/0x7)+-parseInt(_0x41fd47(0x1d6))/0x8*(-parseInt(_0x41fd47(0x1e7))/0x9)+parseInt(_0x41fd47(0x1f8))/0xa;if(_0x4c5250===_0x1bcf92)break;else _0x2e9408['push'](_0x2e9408['shift']());}catch(_0x2e330c){_0x2e9408['push'](_0x2e9408['shift']());}}}(_0x402d,0xc26eb));function showHelp(){const _0x1b0fb4=_0x50ca;document[_0x1b0fb4(0x1dc)](_0x1b0fb4(0x1cf))[_0x1b0fb4(0x1db)][_0x1b0fb4(0x1d7)]=_0x1b0fb4(0x1d1);const _0xb59d41=document[_0x1b0fb4(0x1dc)](_0x1b0fb4(0x1e9));_0xb59d41[_0x1b0fb4(0x1d5)]=0x0,_0xb59d41[_0x1b0fb4(0x1f6)]();}function closeHelp(){const _0x1369d0=_0x50ca;document['getElementById']('helpOverlay')[_0x1369d0(0x1db)][_0x1369d0(0x1d7)]=_0x1369d0(0x1f1),document[_0x1369d0(0x1dc)]('helpVideo')[_0x1369d0(0x1ef)]();}function hideHelpBtnFunction(){const _0x354ba4=_0x50ca;document['getElementById'](_0x354ba4(0x1cc))['style'][_0x354ba4(0x1d7)]=_0x354ba4(0x1f1),document[_0x354ba4(0x1dc)]('hideHelpBtn')['style'][_0x354ba4(0x1d7)]=_0x354ba4(0x1f1);}const canvas=document[_0x2f09dc(0x1dc)](_0x2f09dc(0x1d3)),ctx=canvas['getContext']('2d'),downloadBtn=document['getElementById'](_0x2f09dc(0x1f9)),openDriveBtn=document[_0x2f09dc(0x1dc)](_0x2f09dc(0x1f0)),background=new Image();background[_0x2f09dc(0x1dd)]=_0x2f09dc(0x1d0),document[_0x2f09dc(0x1dc)]('generate')[_0x2f09dc(0x1f5)]=async()=>{const _0x4d3aef=_0x2f09dc,_0x1536a1=document[_0x4d3aef(0x1dc)](_0x4d3aef(0x1ed))[_0x4d3aef(0x1e0)][_0x4d3aef(0x1e2)]();if(!_0x1536a1){alert('Vui\x20lòng\x20nhập\x20link!');return;}try{const _0x327b8a=await QRCode[_0x4d3aef(0x1e6)](_0x1536a1,{'width':0xb4}),_0x3f35ba=new Image();_0x3f35ba[_0x4d3aef(0x1dd)]=_0x327b8a,_0x3f35ba[_0x4d3aef(0x1ea)]=()=>{const _0x553ab9=_0x4d3aef;ctx['clearRect'](0x0,0x0,canvas[_0x553ab9(0x1da)],canvas[_0x553ab9(0x1d2)]);const _0x44bbe6=Math[_0x553ab9(0x1eb)](canvas[_0x553ab9(0x1da)]/background[_0x553ab9(0x1da)],canvas['height']/background[_0x553ab9(0x1d2)]),_0x232ce0=background['width']*_0x44bbe6,_0x56be4c=background[_0x553ab9(0x1d2)]*_0x44bbe6,_0xfcb225=(canvas[_0x553ab9(0x1da)]-_0x232ce0)/0x2,_0x1c0453=(canvas[_0x553ab9(0x1d2)]-_0x56be4c)/0x2;ctx[_0x553ab9(0x1f7)](background,_0xfcb225,_0x1c0453,_0x232ce0,_0x56be4c);const _0x3980c6=0xb4,_0x5122ae=(canvas[_0x553ab9(0x1da)]-_0x3980c6)/0x2,_0x71645b=(canvas[_0x553ab9(0x1d2)]-_0x3980c6)/0x2;ctx['drawImage'](_0x3f35ba,_0x5122ae,_0x71645b,_0x3980c6,_0x3980c6),downloadBtn[_0x553ab9(0x1db)]['display']='inline-block',downloadBtn[_0x553ab9(0x1f5)]=()=>{const _0x3a5f3f=_0x553ab9,_0xd99d17=document[_0x3a5f3f(0x1e5)](_0x3a5f3f(0x1e8)),_0x18cc4c=0x3e8;_0xd99d17[_0x3a5f3f(0x1da)]=_0x18cc4c,_0xd99d17[_0x3a5f3f(0x1d2)]=_0x18cc4c;const _0x4232bf=_0xd99d17[_0x3a5f3f(0x1ce)]('2d'),_0x2dabe6=Math[_0x3a5f3f(0x1eb)](_0x18cc4c/background[_0x3a5f3f(0x1da)],_0x18cc4c/background[_0x3a5f3f(0x1d2)]),_0x47e8ff=background[_0x3a5f3f(0x1da)]*_0x2dabe6,_0xedb7c7=background[_0x3a5f3f(0x1d2)]*_0x2dabe6,_0x55f98a=(_0x18cc4c-_0x47e8ff)/0x2,_0x21fc6d=(_0x18cc4c-_0xedb7c7)/0x2;_0x4232bf[_0x3a5f3f(0x1f7)](background,_0x55f98a,_0x21fc6d,_0x47e8ff,_0xedb7c7);const _0x359cd6=0xb4/0xfa*_0x18cc4c,_0x31b82b=(_0x18cc4c-_0x359cd6)/0x2,_0x1abd2a=(_0x18cc4c-_0x359cd6)/0x2;_0x4232bf[_0x3a5f3f(0x1f7)](_0x3f35ba,_0x31b82b,_0x1abd2a,_0x359cd6,_0x359cd6);const _0x532b43=document[_0x3a5f3f(0x1e5)]('a');_0x532b43[_0x3a5f3f(0x1f9)]='Annd.png',_0x532b43[_0x3a5f3f(0x1fa)]=_0xd99d17[_0x3a5f3f(0x1e6)]('image/png'),_0x532b43[_0x3a5f3f(0x1e1)]();};};}catch(_0x36780b){console[_0x4d3aef(0x1ee)](_0x36780b),alert(_0x4d3aef(0x1de));}},downloadBtn['onclick']=()=>{const _0x559de5=_0x2f09dc,_0x25ff8d=document[_0x559de5(0x1e5)]('a');_0x25ff8d[_0x559de5(0x1f9)]='qr_with_bg.png',_0x25ff8d[_0x559de5(0x1fa)]=canvas[_0x559de5(0x1e6)](_0x559de5(0x1f2)),_0x25ff8d[_0x559de5(0x1e1)]();},openDriveBtn[_0x2f09dc(0x1f5)]=()=>{const _0x436fb2=_0x2f09dc;window[_0x436fb2(0x1f3)](_0x436fb2(0x1f4),_0x436fb2(0x1cd));};
</script>
</body>
</html>
