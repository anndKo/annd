<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Lịch Âm - Dương</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#07f2fa;--muted:#9ca3af;color-scheme:dark}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:linear-gradient(180deg,#071022 0%, #081226 100%);
      color:#e6eef6;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
    .app{width:100%;max-width:980px}
    .top{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:16px}
    .controls{display:flex;gap:8px;align-items:center}
    select,input[type=number],button{background:var(--card);border:1px solid rgba(255,255,255,0.04);
      padding:8px 10px;border-radius:8px;color:inherit}
    button{cursor:pointer}
    .calendar{background:rgba(255,255,255,0.03);padding:14px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.6)}
    .grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
    .dayname{padding:6px;text-align:center;font-weight:600;color:var(--muted)}
    .cell{min-height:88px;padding:6px;border-radius:8px;background:rgb(208, 240, 64);color:black;display:flex;flex-direction:column;justify-content:space-between}
    .cell .solar{font-weight:700;font-size:16px}
    .cell .lunar{font-size:12px;color:red;font-weight:600;}
    .today{outline:2px solid var(--accent);padding:6px;border-radius:6px}
    .legend{display:flex;gap:10px;margin-top:12px;align-items:center}
    .legend span{font-size:13px;color:var(--muted)}

    /* Popup */
    .popup-bg{
      position:fixed;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,0.75);
      display:flex;align-items:center;justify-content:center;
      visibility:hidden;opacity:0;transition:.25s;
    }
    .popup-bg.show{visibility:visible;opacity:1;}
    .popup{
      background:#0b1220;padding:20px;border-radius:12px;min-width:300px;max-width:90%;
      box-shadow:0 6px 20px rgba(0,0,0,0.6);text-align:center;
    }
    .popup h3{margin-top:0;}
    .popup input, .popup select{
      width:100%;margin-top:10px;padding:10px;border-radius:8px;
      background:#ffffff;color:black;font-weight:600;
    }
    .close-btn{
      margin-top:15px;background:#06b6d4;padding:10px 20px;border-radius:8px;border:none;
      cursor:pointer;font-weight:700;color:#000;
    }
    #popupResult{margin-top:12px;font-weight:700;color:red;}
    #helpBtn {
    position: fixed;
    top: 15px;
    right: 15px;
    padding: 10px 18px;
    background: #ff9800;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    z-index: 11000;
}

#hideHelpBtn {
    position: fixed;
    top: 15px;
    right: 130px;
    padding: 10px 18px;
    background: #ca2222;
    color:white;
    border:none;
    border-radius:8px;
    font-size:16px;
    cursor:pointer;
    z-index:11000;
    font-weight: 600;
}

#helpOverlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.8);
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 12000;
}
#helpOverlay video {
    max-width: 90%;
    max-height: 80%;
    border-radius: 12px;
}
#closeHelp {
    margin-top: 20px;
    padding: 12px 20px;
    background: #e53935;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 18px;
    cursor: pointer;
}
  </style>
</head>
<body>
  <!-- NÚT ẨN DUY NHẤT -->
<button id="hideHelpBtn" onclick="hideHelpBtnFunction()">X</button>

<!-- NÚT HƯỚNG DẪN -->
<button id="helpBtn" onclick="showHelp()">Hướng dẫn</button>

<!-- OVERLAY VIDEO -->
<div id="helpOverlay">
    <video id="helpVideo" controls>
        <source src="lịch.mp4" type="video/mp4">
    </video>
    <button id="closeHelp" onclick="closeHelp()">Đóng</button>
</div>

  <div class="app">
    <div class="top">
      <h2>Lịch Âm - Dương</h2>
      <div class="controls">
        <select id="month" style="background-color: aliceblue; color: #03060e; font-weight: 600;">
          <option value="1">Tháng 1</option><option value="2">Tháng 2</option><option value="3">Tháng 3</option>
          <option value="4">Tháng 4</option><option value="5">Tháng 5</option><option value="6">Tháng 6</option>
          <option value="7">Tháng 7</option><option value="8">Tháng 8</option><option value="9">Tháng 9</option>
          <option value="10">Tháng 10</option><option value="11">Tháng 11</option><option value="12">Tháng 12</option>
        </select>

        <input id="year" type="number" value="2025" min="1900" max="2199" 
               style="background-color:white;font-weight:600;color:black;">

        <button id="show" style="background-color:#06b6d4;">Hiện</button>
      </div>
    </div>

    <div class="calendar" id="calendar">
      <div class="grid" id="header">
        <div class="dayname">T2</div><div class="dayname">T3</div><div class="dayname">T4</div>
        <div class="dayname">T5</div><div class="dayname">T6</div><div class="dayname">T7</div>
        <div class="dayname">CN</div>
      </div>

      <div class="grid" id="days"></div>

      <div class="legend">
        <div><span>Ô viền xanh:</span> <strong>Hôm nay</strong></div>
        <div><span>Chữ nhỏ:</span> <strong>Ngày âm</strong></div>
      </div>

      <br>

      <button id="btnSolar" style="background:#15eeb8;margin-right:6px;font-weight: 600; color: black;">Tra ngày Dương → Âm</button>
      <button id="btnLunar" style="background:#06b6d4;font-weight: 600;color: black;">Tra ngày Âm → Dương</button>

    </div>
  </div>

  <!-- POPUP -->
  <div class="popup-bg" id="popupBg">
    <div class="popup" id="popupBox">
      <h3 id="popupTitle">Tra cứu</h3>

      <div id="solarInput">
        <input type="date" id="solarDate">
      </div>

      <div id="lunarInput" style="display:none;">
        <input type="number" id="lDay" placeholder="Ngày" min="1" max="30">
        <input type="number" id="lMonth" placeholder="Tháng" min="1" max="12">
        <input type="number" id="lYear" placeholder="Năm" min="1900" max="2199">
        <select id="lLeap">
          <option value="0">Thường</option>
          <option value="1">Nhuận</option>
        </select>
      </div>

      <!-- KẾT QUẢ POPUP (MÀU ĐỎ) -->
      <div id="popupResult"></div>

      <button class="close-btn" id="popupClose">Đóng</button>
    </div>
  </div>

<script>
  const _0x45f0e9=_0x941d;function _0x3e83(){const _0x57d252=['click','100136vuywzq','37629XmAYDR','toDataURL','1VvpUpc','display','href','nenqr.jpg','currentTime','open','image/png','error','none','height','onload','Annd.png','helpBtn','21FgrpaR','src','width','https://drive.google.com','min','11761189SHlDhH','generate','createElement','2405000TDHOfs','getElementById','value','_blank','openDrive','drawImage','1178852cfzZzA','qrCanvas','pause','142752PRDyDv','flex','clearRect','style','inline-block','getContext','12lgKXwq','helpVideo','onclick','3596640VLKKiv','download','10QavibM','6XfZSrg','Vui\x20lòng\x20nhập\x20link!','urlInput','helpOverlay'];_0x3e83=function(){return _0x57d252;};return _0x3e83();}(function(_0x16c2b8,_0xae4fc){const _0x4f3546=_0x941d,_0x1129ee=_0x16c2b8();while(!![]){try{const _0x52ec4d=-parseInt(_0x4f3546(0x156))/0x1*(parseInt(_0x4f3546(0x171))/0x2)+parseInt(_0x4f3546(0x180))/0x3*(-parseInt(_0x4f3546(0x185))/0x4)+-parseInt(_0x4f3546(0x16b))/0x5+parseInt(_0x4f3546(0x17d))/0x6+parseInt(_0x4f3546(0x163))/0x7*(-parseInt(_0x4f3546(0x174))/0x8)+-parseInt(_0x4f3546(0x154))/0x9*(parseInt(_0x4f3546(0x17f))/0xa)+parseInt(_0x4f3546(0x168))/0xb*(parseInt(_0x4f3546(0x17a))/0xc);if(_0x52ec4d===_0xae4fc)break;else _0x1129ee['push'](_0x1129ee['shift']());}catch(_0x26b31e){_0x1129ee['push'](_0x1129ee['shift']());}}}(_0x3e83,0x77bc0));function showHelp(){const _0x545b18=_0x941d;document[_0x545b18(0x16c)](_0x545b18(0x183))[_0x545b18(0x177)]['display']=_0x545b18(0x175);const _0x3f3435=document[_0x545b18(0x16c)](_0x545b18(0x17b));_0x3f3435[_0x545b18(0x15a)]=0x0,_0x3f3435['play']();}function closeHelp(){const _0x5611b8=_0x941d;document[_0x5611b8(0x16c)](_0x5611b8(0x183))[_0x5611b8(0x177)]['display']=_0x5611b8(0x15e),document[_0x5611b8(0x16c)](_0x5611b8(0x17b))[_0x5611b8(0x173)]();}function hideHelpBtnFunction(){const _0x528770=_0x941d;document[_0x528770(0x16c)](_0x528770(0x162))[_0x528770(0x177)][_0x528770(0x157)]=_0x528770(0x15e),document[_0x528770(0x16c)]('hideHelpBtn')[_0x528770(0x177)][_0x528770(0x157)]='none';}const canvas=document[_0x45f0e9(0x16c)](_0x45f0e9(0x172)),ctx=canvas[_0x45f0e9(0x179)]('2d'),downloadBtn=document[_0x45f0e9(0x16c)](_0x45f0e9(0x17e)),openDriveBtn=document['getElementById'](_0x45f0e9(0x16f)),background=new Image();function _0x941d(_0x4765c5,_0x3fea06){const _0x3e83dd=_0x3e83();return _0x941d=function(_0x941d63,_0x58b148){_0x941d63=_0x941d63-0x154;let _0x8aa77c=_0x3e83dd[_0x941d63];return _0x8aa77c;},_0x941d(_0x4765c5,_0x3fea06);}background[_0x45f0e9(0x164)]=_0x45f0e9(0x159),document[_0x45f0e9(0x16c)](_0x45f0e9(0x169))[_0x45f0e9(0x17c)]=async()=>{const _0x40ca9a=_0x45f0e9,_0x2c2e05=document[_0x40ca9a(0x16c)](_0x40ca9a(0x182))[_0x40ca9a(0x16d)]['trim']();if(!_0x2c2e05){alert(_0x40ca9a(0x181));return;}try{const _0x18c8a3=await QRCode[_0x40ca9a(0x155)](_0x2c2e05,{'width':0xb4}),_0x251956=new Image();_0x251956[_0x40ca9a(0x164)]=_0x18c8a3,_0x251956[_0x40ca9a(0x160)]=()=>{const _0x39f26b=_0x40ca9a;ctx[_0x39f26b(0x176)](0x0,0x0,canvas[_0x39f26b(0x165)],canvas[_0x39f26b(0x15f)]);const _0x4f34b6=Math['min'](canvas[_0x39f26b(0x165)]/background[_0x39f26b(0x165)],canvas[_0x39f26b(0x15f)]/background[_0x39f26b(0x15f)]),_0x12c876=background[_0x39f26b(0x165)]*_0x4f34b6,_0x345080=background['height']*_0x4f34b6,_0x3ffb00=(canvas[_0x39f26b(0x165)]-_0x12c876)/0x2,_0x2ac3ce=(canvas[_0x39f26b(0x15f)]-_0x345080)/0x2;ctx[_0x39f26b(0x170)](background,_0x3ffb00,_0x2ac3ce,_0x12c876,_0x345080);const _0x26f65a=0xb4,_0x4cd27c=(canvas[_0x39f26b(0x165)]-_0x26f65a)/0x2,_0x102e90=(canvas[_0x39f26b(0x15f)]-_0x26f65a)/0x2;ctx[_0x39f26b(0x170)](_0x251956,_0x4cd27c,_0x102e90,_0x26f65a,_0x26f65a),downloadBtn[_0x39f26b(0x177)][_0x39f26b(0x157)]=_0x39f26b(0x178),downloadBtn[_0x39f26b(0x17c)]=()=>{const _0x267e8d=_0x39f26b,_0x67daed=document[_0x267e8d(0x16a)]('canvas'),_0x345fa7=0x3e8;_0x67daed[_0x267e8d(0x165)]=_0x345fa7,_0x67daed[_0x267e8d(0x15f)]=_0x345fa7;const _0x1aed7b=_0x67daed[_0x267e8d(0x179)]('2d'),_0x432b18=Math[_0x267e8d(0x167)](_0x345fa7/background[_0x267e8d(0x165)],_0x345fa7/background[_0x267e8d(0x15f)]),_0x2812f1=background[_0x267e8d(0x165)]*_0x432b18,_0x5f1b28=background[_0x267e8d(0x15f)]*_0x432b18,_0xc9cc0f=(_0x345fa7-_0x2812f1)/0x2,_0x27ce8f=(_0x345fa7-_0x5f1b28)/0x2;_0x1aed7b[_0x267e8d(0x170)](background,_0xc9cc0f,_0x27ce8f,_0x2812f1,_0x5f1b28);const _0x5caec6=0xb4/0xfa*_0x345fa7,_0x1979b2=(_0x345fa7-_0x5caec6)/0x2,_0x1fd228=(_0x345fa7-_0x5caec6)/0x2;_0x1aed7b[_0x267e8d(0x170)](_0x251956,_0x1979b2,_0x1fd228,_0x5caec6,_0x5caec6);const _0x1d2296=document[_0x267e8d(0x16a)]('a');_0x1d2296['download']=_0x267e8d(0x161),_0x1d2296[_0x267e8d(0x158)]=_0x67daed['toDataURL'](_0x267e8d(0x15c)),_0x1d2296[_0x267e8d(0x184)]();};};}catch(_0x27f919){console[_0x40ca9a(0x15d)](_0x27f919),alert('Có\x20lỗi\x20khi\x20tạo\x20QR\x20Code.');}},downloadBtn['onclick']=()=>{const _0xa5ee49=_0x45f0e9,_0x4efd14=document[_0xa5ee49(0x16a)]('a');_0x4efd14[_0xa5ee49(0x17e)]='qr_with_bg.png',_0x4efd14[_0xa5ee49(0x158)]=canvas[_0xa5ee49(0x155)](_0xa5ee49(0x15c)),_0x4efd14[_0xa5ee49(0x184)]();},openDriveBtn[_0x45f0e9(0x17c)]=()=>{const _0x1e6dc5=_0x45f0e9;window[_0x1e6dc5(0x15b)](_0x1e6dc5(0x166),_0x1e6dc5(0x16e));};
</script>
</body>
</html>
